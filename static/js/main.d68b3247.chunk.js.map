{"version":3,"sources":["utils.js","panels/Home.js","panels/Pets_Pet.js","panels/Pets_Shelder.js","panels/Pets.js","App.js","index.js","apieva.js","img/persik.png"],"names":["getTimeString","time","a","Date","year","getFullYear","month","getMonth","getDate","apieva","require","Home","platform","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onRefresh","makeOnRefresh","assertThisInitialized","onLoaded","bind","state","content","activePanel","popout","fetching","fetchedUser","userProfile","setState","react_default","createElement","vkui","size","description","nickname","before","photo_200","src","concat","first_name","last_name","indicator","x","balance","toString","replace","job","level","value","score","maxScore","cSend","id","isFetching","style","marginTop","title","href","target","React","Component","osname","Pets_Pet","feedAction","makeAction","petId","playAction","wakeUpAction","shelterAction","openRestorePetSheet","_this2","openSheet","actionsLayout","actions","autoclose","action","onClose","pet","isLoaded","error","_this3","initPets","petType","getPetType","type","result","died","smile","issleep","name","display","stretched","marginRight","onClick","owner","hunger","Math","min","love","energy","className","persik","alt","left","close","IOS","chevron_back_default","back_default","Pets_Shelder","send","then","response","petList","data","map","openPet","theme","petTypeList","getPetTypes","getPets","mname","Pets","petcontent","panels_Pets_Pet","pets","petsHtml","forEach","petStats","padding","margin","push","e","add_default","_this4","panels_Pets_Shelder","App","parseQueryString","string","slice","split","queryParam","kvp","key","reduce","query","getItem","tag","icon","onStoryChange","selected","activeStory","data-story","text","currentTarget","dataset","story","connect","subscribe","detail","console","log","tabbar","user_default","bug_default","panels_Home","panels_Pets","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","ReactDOM","render","src_App","getElementById","petTypes","group","method","params","axios","get","window","location","search","substring","cb","r","_initPets","apply","arguments","_callee","_home_evaclient_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","wrap","_context","prev","next","sent","stop","typeId","th","react__WEBPACK_IMPORTED_MODULE_2___default","_vkontakte_vkui__WEBPACK_IMPORTED_MODULE_3__","b","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.d68b3247.chunk.js","sourcesContent":["export function numberWithCommas(x) {\r\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n}\r\n\r\nexport function getTimeString(time){\r\n  var a = new Date(time * 1000);\r\n  var months = ['Января','Февраля','Марта','Апреля','Мая','Июня','Июля','Августа','Сентября','Октября','Ноября','Декабря'];\r\n  var year = a.getFullYear();\r\n  var month = months[a.getMonth()];\r\n  var date = a.getDate();\r\n  var time = date + ' ' + month + ' ' + year;\r\n  return time;\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { Panel, ListItem, Button, Link, Group, Div, PullToRefresh, Avatar, PanelHeader, HeaderButton, platform, IOS, Cell, Spinner, View, CellButton, Progress } from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nimport { numberWithCommas } from '../utils.js';\r\n\r\nconst apieva = require('../apieva');\r\nconst osname = platform();\r\n\r\nclass Home extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n        this.onRefresh = apieva.makeOnRefresh('profile', 'get', {}, this, this.onLoaded.bind(this));\r\n\t\tthis.state = {\r\n\t\t\tcontent: null,\r\n            activePanel: \"main\",\r\n\t\t\tpopout: null,\r\n\t\t\tfetching: false\r\n\t\t};\r\n     }\r\n\r\n    async onLoaded(fetchedUser, userProfile) {\r\n        this.setState({ content: (\r\n            <Cell>\r\n     \t\t\t<Group>\r\n     \t\t\t\t<Cell\r\n     \t\t        \tsize=\"l\"\r\n     \t\t          \tdescription={userProfile.nickname}\r\n     \t\t          \tbefore={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\r\n     \t\t        >\r\n     \t\t        \t{`${fetchedUser.first_name} ${fetchedUser.last_name}`}\r\n     \t\t        </Cell>\r\n     \t\t\t</Group>\r\n     \t\t\t<Group>\r\n     \t\t\t\t<Cell indicator={numberWithCommas(userProfile.balance) + \" бит\"} description={userProfile.job}>Баланс</Cell>\r\n     \t\t\t\t<Cell indicator={userProfile.level}>Уровень</Cell>\r\n     \t\t\t\t<Div><Progress value={userProfile.score/userProfile.maxScore*100} /></Div>\r\n\r\n     \t\t\t</Group>\r\n     \t\t</Cell>\r\n     \t), fetching: false });// <Cell indicator={userProfile.role}>Роль</Cell>\r\n     }\r\n\r\n\t openSheet(popout) {\r\n\t\t this.setState({ popout });\r\n\t }\r\n\r\n\trender() {\r\n        if(!this.state.content && this.props.fetchedUser) apieva.cSend('profile', 'get', {}, this.props, this.onLoaded.bind(this));\r\n\r\n        return (\r\n            <View activePanel={this.state.activePanel} popout={this.state.popout}>\r\n\t\t\t\t<Panel id='main'>\r\n\t\t\t\t\t<PanelHeader>👤 Мой профиль</PanelHeader>\r\n\t\t\t\t\t<PullToRefresh onRefresh={this.onRefresh} isFetching={this.state.fetching}>\r\n\t\t\t\t\t\t{this.state.content ? this.state.content : <Spinner size=\"large\" style={{ marginTop: 20 }} />}\r\n\t\t\t\t\t</PullToRefresh>\r\n                    <Cell>\r\n                        <Group title=\"Прочее\">\r\n                            <Link href=\"https://vk.com/@evarobotgroup-help-play-app\" target=\"_blank\"><Button size=\"xl\" level=\"outline\">Как играть?</Button></Link>\r\n                            <Link href=\"https://vk.com/evabottp\" target=\"_blank\"><Button size=\"xl\" level=\"outline\">Тех. поддержка</Button></Link>\r\n                            <Link href=\"https://vk.me/join/AAAAACNkOSYHHwx7BXja6x2c\" target=\"_blank\"><Button size=\"xl\" level=\"outline\">Официальная беседа бота</Button></Link>\r\n                        </Group>\r\n                    </Cell>\r\n\t\t\t\t</Panel>\r\n            </View>\r\n    \t);\r\n\t}\r\n}\r\n\r\nHome.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string\r\n\t}),\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { Panel, ListItem, Alert, Button, Link, PullToRefresh, ScreenSpinner, Group, Div, Textarea, Avatar, PanelHeader, List, HeaderButton, platform, IOS, Cell, Spinner, View, CellButton, Progress } from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nimport persik from '../img/persik.png';\r\nimport './Persik.css';\r\n\r\nimport { getTimeString } from '../utils.js';\r\n\r\nconst apieva = require('../apieva');\r\nconst osname = platform();\r\n\r\nclass Pets_Pet extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n        this.feedAction = apieva.makeAction('pets', 'feed', { petId: this.props.id }, this, this.onLoaded.bind(this));\r\n        this.playAction = apieva.makeAction('pets', 'play', { petId: this.props.id }, this, this.onLoaded.bind(this));\r\n        this.wakeUpAction = apieva.makeAction('pets', 'wakeUp', { petId: this.props.id }, this, this.onLoaded.bind(this));\r\n        this.shelterAction = apieva.makeAction('pets', 'shelter', { petId: this.props.id }, this, this.onLoaded.bind(this));\r\n\r\n        this.openRestorePetSheet = this.openRestorePetSheet.bind(this);\r\n        this.onRefresh = this.onRefresh.bind(this);\r\n\r\n        this.state = { };\r\n    }\r\n\r\n    onRefresh() {\r\n    \tthis.setState({ fetching: true });\r\n\t\tapieva.cSend('pets', 'get', { petId: this.props.id }, this.props, this.onLoaded.bind(this));\r\n  \t}\r\n\r\n     openRestorePetSheet() {\r\n         this.props.openSheet(\r\n             <Alert\r\n                actionsLayout=\"vertical\"\r\n                actions={[{\r\n                    title: 'Восстановить',\r\n                    autoclose: true,\r\n                    action: () => apieva.cSend('pets', 'restore', { petId: this.props.id }, this.props, this.onLoaded.bind(this))\r\n                }, {\r\n                    title: 'Отмена',\r\n                    autoclose: true,\r\n                    style: 'cancel'\r\n                }]}\r\n                onClose={() => this.props.openSheet(null)}\r\n            >\r\n                <h2>Восстановить питомца</h2>\r\n                <p>Вы снова сможете любить и ухаживать за ним</p>\r\n            </Alert>\r\n    );\r\n  }\r\n\r\n\r\n     async onLoaded(fetchedUser, pet) {\r\n         this.isLoaded = true;\r\n        // alert(JSON.stringify(pet))\r\n         if (pet.error) {\r\n             this.props.openSheet(\r\n                <Alert actionsLayout=\"vertical\" actions={[{\r\n                        title: 'Назад',\r\n                        autoclose: true,\r\n                        style: 'cancel'\r\n                    }]}\r\n                    onClose={() => this.props.openSheet(null)}\r\n                >\r\n                    <h2>Произошла ошибка</h2>\r\n                    <p>{pet.error}</p>\r\n                </Alert>\r\n            );\r\n\r\n            return;\r\n         }\r\n\r\n         await apieva.initPets();\r\n         let petType = apieva.getPetType(pet.type);\r\n         \r\n         let result = (\r\n            <Div>\r\n    \t\t\t<Group>\r\n    \t\t\t\t<Cell\r\n                        size=\"l\"\r\n                        before={<Avatar>{pet.died==0 ? petType.smile : '💀'}</Avatar>}\r\n                        description={pet.died==0 ? '' : `Умер ${getTimeString(pet.died)}.`}\r\n                        indicator={pet.issleep==0 ? '' : '💤'}\r\n                    >\r\n    \t\t        \t{pet.name}\r\n    \t\t        </Cell>\r\n                    {pet.died==0 ? (\r\n                        <Div>\r\n                            {pet.issleep==0 ? (\r\n                                <Div style={{display: 'flex'}}>\r\n                                    <Button size=\"l\" stretched style={{ marginRight: 8 }} onClick={this.playAction}>Поиграть</Button>\r\n                                    <Button size=\"l\" stretched level=\"secondary\" onClick={this.feedAction}>Покормить</Button>\r\n                                </Div>\r\n                            ) : (\r\n                                <Button size=\"xl\" level=\"outline\" onClick={this.wakeUpAction}>Разбудить</Button>\r\n                            )}\r\n                            {pet.owner==0 ? (<Button size=\"xl\" level=\"outline\" onClick={this.shelterAction}>Купить питомца</Button>) : ''}\r\n                        </Div>\r\n                    ) : ''}\r\n    \t\t\t</Group>\r\n    \t\t\t<Group title=\"Информация о питомце\">\r\n                    {\r\n                        pet.died==0 ? (\r\n                            <Div>\r\n                \t\t\t\t<Cell indicator={pet.hunger + '%'}>Сытость</Cell>\r\n                                <Progress value={Math.min(100, pet.hunger)} />\r\n\r\n                                <Cell indicator={pet.love + '%'}>Счастье</Cell>\r\n                                <Progress value={Math.min(100, pet.love)} />\r\n\r\n                                <Cell indicator={pet.energy + '%'}>Энергия</Cell>\r\n                                <Progress value={Math.min(100, pet.energy)} />\r\n                            </Div>\r\n                        ) : (\r\n                            <Div>\r\n                                <img className=\"DiedPet\" src={persik} alt=\"Died pet\"/>\r\n                                <Div>\r\n                                    <p>Ваш питомец умер, потому что вы его не кормили.</p>\r\n                                    <CellButton onClick={() => this.openRestorePetSheet()}>Восстановите питомца за 3 000 000 бит.</CellButton>\r\n                                </Div>\r\n                            </Div>\r\n                        )\r\n                    }\r\n    \t\t\t</Group>\r\n    \t\t</Div>\r\n     \t);\r\n\r\n     \tthis.setState({ content: result, fetching: false });\r\n     }\r\n\r\n\trender() {\r\n        if(!this.state.content) apieva.cSend('pets', 'get', { petId: this.props.id }, this.props, this.onLoaded.bind(this));\r\n\r\n    \treturn (\r\n            <Div>\r\n                <PanelHeader left={<HeaderButton onClick={this.props.close}>{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}</HeaderButton>}>\r\n                    {this.props.title}\r\n                </PanelHeader>\r\n                <PullToRefresh onRefresh={this.onRefresh} isFetching={this.state.fetching}>\r\n                    {this.state.content ? this.state.content : <Spinner size=\"large\" style={{ marginTop: 20 }} />}\r\n                </PullToRefresh>\r\n            </Div>\r\n    \t);\r\n\t}\r\n}\r\n\r\nPets_Pet.propTypes = {\r\n\ttitle: PropTypes.string.isRequired,\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string\r\n\t}),\r\n};\r\n\r\nexport default Pets_Pet;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { Panel, ListItem, ActionSheetItem, ActionSheet, ScreenSpinner, Button, List, Alert, Link, Group, Div, PullToRefresh, Avatar, PanelHeader, HeaderButton, platform, IOS, Cell, Spinner, View, CellButton, Progress } from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nimport { getTimeString } from '../utils.js';\r\n\r\nconst apieva = require('../apieva');\r\nconst osname = platform();\r\n\r\nclass Pets_Shelder extends React.Component {\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\r\n        this.state = { };\r\n    }\r\n\r\n    getPets(petType) {\r\n        this.props.openSheet(<ScreenSpinner />);\r\n        apieva.send('pets', 'listFree', { petType: petType.id }).then((response) => {\r\n            let petList = response.data.map(pet => <ActionSheetItem autoclose onClick={() => this.props.openPet(pet, petType)}>{pet.name}</ActionSheetItem>);\r\n            this.props.openSheet(\r\n                <ActionSheet onClose={() => this.props.openSheet(null)}>\r\n                    {petList}\r\n                    {osname === IOS && <ActionSheetItem autoclose theme=\"cancel\">Закрыть</ActionSheetItem>}\r\n                </ActionSheet>\r\n            );\r\n        });\r\n    }\r\n\r\n\trender() {\r\n        let petTypeList = apieva.getPetTypes().map(type => (\r\n            <ListItem>\r\n                <Cell\r\n                    before={<Avatar>{type.smile}</Avatar>}\r\n                    onClick={() => this.getPets(type)}\r\n                >{type.mname}</Cell>\r\n            </ListItem>\r\n        ))\r\n\r\n    \treturn (\r\n            <Div>\r\n                <PanelHeader left={<HeaderButton onClick={this.props.close}>{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}</HeaderButton>}>\r\n                    🐶 Приют питомцев\r\n                </PanelHeader>\r\n                <Group title=\"Список доступных видов\"><List>{petTypeList}</List></Group>\r\n            </Div>\r\n    \t);\r\n\t}\r\n}\r\n\r\nPets_Shelder.propTypes = {\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string\r\n\t}),\r\n};\r\n\r\nexport default Pets_Shelder;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { Panel, ListItem, Button, Link, Group, Div, PullToRefresh, Avatar, PanelHeader, HeaderButton, platform, IOS, Cell, Spinner, View, CellButton, Progress } from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\n\r\nimport Pets_Pet from './Pets_Pet';\r\nimport Pets_Shelder from './Pets_Shelder';\r\n\r\nimport { getTimeString } from '../utils.js';\r\n\r\nconst apieva = require('../apieva');\r\nconst osname = platform();\r\n\r\nclass Pets extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.openSheet = this.openSheet.bind(this);\r\n\t\tthis.onRefresh = apieva.makeOnRefresh('pets', 'list', {}, this, this.onLoaded.bind(this));\r\n\t\tthis.openPet = this.openPet.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcontent: null,\r\n            activePanel: \"main\",\r\n\t\t\tpopout: null,\r\n\t\t\tfetching: false\r\n\t\t};\r\n     }\r\n\r\n\topenPet(pet, petType) {\r\n\t\tthis.setState({\r\n\t\t\tactivePanel: 'pet',\r\n\t\t\tpetcontent: <Pets_Pet\r\n\t\t\t   id={pet.id}\r\n\t\t\t   title={`${petType.smile} ${pet.name}`}\r\n\t\t\t   close={() => this.setState({ activePanel: 'main' })}\r\n\t\t\t   openSheet = {(popout) => this.openSheet(popout)}\r\n\t\t   />\r\n\t\t});\r\n\t}\r\n\r\n     async onLoaded(fetchedUser, pets) {\r\n\t\t await apieva.initPets();\r\n\r\n         let petsHtml = [];\r\n         pets.forEach(pet => {\r\n\t\t\t let petType = apieva.getPetType(pet.type);\r\n             let petStats = (<Div style={{display: 'flex', padding: 0, margin: 0}}>\r\n                <Div stretched style={{padding: 10, margin: 0}}>🍗 {pet.hunger}%</Div>\r\n                <Div stretched style={{padding: 10, margin: 0}}>💖 {pet.love}%</Div>\r\n                <Div stretched style={{padding: 10, margin: 0}}>⚡ {pet.energy}%</Div>\r\n              </Div>);\r\n\r\n             petsHtml.push(\r\n                 <Cell\r\n                     before={<Avatar>{petType.smile}</Avatar>}\r\n                     size=\"l\"\r\n                     onClick={(e) => {\r\n\t\t\t\t\t\t this.setState({\r\n\t\t\t\t\t\t\t activePanel: 'pet',\r\n\t\t\t\t\t\t\t petcontent: <Pets_Pet\r\n\t\t\t\t\t\t\t \tid={pet.id}\r\n\t\t\t\t\t\t\t\ttitle={`${petType.smile} ${pet.name}`}\r\n\t\t\t\t\t\t\t\tclose={() => this.setState({ activePanel: 'main' })}\r\n\t\t\t\t\t\t\t\topenSheet = {(popout) => this.openSheet(popout)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t });\r\n\t\t\t\t\t }}\r\n\t\t\t\t\t indicator={pet.issleep==0 ? '' : '💤'}\r\n                     description={pet.died==0 ? petStats : `💀 Умер ${getTimeString(pet.died)}.`}\r\n                 >\r\n\t\t\t\t \t{pet.name}\r\n                 </Cell>\r\n             );\r\n         });\r\n\r\n     \tlet result = (\r\n     \t\t<Div>\r\n     \t\t\t<Group>\r\n     \t\t\t\t<Link href=\"https://vk.com/@evarobotgroup-help-pets-app\" target=\"_blank\"><Button size=\"xl\" level=\"outline\">Что такое питомцы?</Button></Link>\r\n     \t\t\t</Group>\r\n     \t\t\t<Group>\r\n                \t{petsHtml}\r\n\t\t\t\t\t<CellButton before={<Icon24Add />} onClick={(e) => {\r\n\t\t\t\t\t\tthis.setState({ activePanel: 'shelder' });\r\n\t\t\t\t\t}}>Завести питомца</CellButton>\r\n     \t\t\t</Group>\r\n     \t\t</Div>\r\n     \t);\r\n\r\n     \tthis.setState({ content: result, fetching: false });\r\n     }\r\n\r\n\t openSheet(popout) {\r\n\t\t this.setState({ popout });\r\n\t }\r\n\r\n\trender() {\r\n        if(!this.state.content) apieva.cSend('pets', 'list', { petId: this.props.id }, this.props, this.onLoaded.bind(this));\r\n\r\n    \treturn (\r\n            <View id=\"petsView\" activePanel={this.state.activePanel} popout={this.state.popout}>\r\n\t\t\t\t<Panel id='main'>\r\n\t\t\t\t\t<PanelHeader>🐾 Мои питомцы</PanelHeader>\r\n\t\t\t\t\t<PullToRefresh onRefresh={this.onRefresh} isFetching={this.state.fetching}>\r\n\t\t\t\t\t\t{this.state.content ? this.state.content : <Spinner size=\"large\" style={{ marginTop: 20 }} />}\r\n\t\t\t\t\t</PullToRefresh>\r\n\t\t\t\t</Panel>\r\n                <Panel id='pet'>{this.state.petcontent}</Panel>\r\n                <Panel id='shelder'><Pets_Shelder\r\n\t\t\t\t\tclose={() => this.setState({ activePanel: 'main' })}\r\n\t\t\t\t\topenSheet={this.openSheet.bind(this)}\r\n\t\t\t\t\topenPet={this.openPet}\r\n\t\t\t\t/></Panel>\r\n            </View>\r\n    \t);\r\n\t}\r\n}\r\n\r\nPets.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string\r\n\t}),\r\n};\r\n\r\nexport default Pets;\r\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport { View, Epic, Tabbar, TabbarItem } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Icon24User from '@vkontakte/icons/dist/24/user'; // Профиль\nimport Icon24Bug from '@vkontakte/icons/dist/24/bug'; // Питомцы\n\nimport Home from './panels/Home';\nimport Pets from './panels/Pets';\n/**\nimport Persik from './panels/Persik';\nimport Money from './panels/Money';\n*/\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactiveStory: 'main',\n\t\t\tfetchedUser: null,\n\t\t};\n\t\tthis.onStoryChange = this.onStoryChange.bind(this);\n     }\n\n\t parseQueryString = (string) => {\n\t   return string.slice(1).split('&')\n\t\t   .map((queryParam) => {\n\t\t\t   let kvp = queryParam.split('=');\n\t\t\t   return {key: kvp[0], value: kvp[1]}\n\t\t   })\n\t\t   .reduce((query, kvp) => {\n\t\t\t   query[kvp.key] = kvp.value;\n\t\t\t   return query\n\t\t   }, {})\n   };\n\n\n     onStoryChange (e) {\n       this.setState({ activeStory: e.currentTarget.dataset.story })\n     }\n\n\n\tcomponentDidMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(e.detail.type);\n\t\t\t}\n\t\t});\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t}\n\n\tgetItem = (tag, name, icon) => {\n\t\treturn (\n\t\t\t<TabbarItem\n\t        \tonClick={this.onStoryChange}\n\t            selected={this.state.activeStory === tag}\n\t            data-story={tag}\n\t            text={name}\n\t        >{icon}</TabbarItem>\n  \t\t);\n\t};\n\n\trender() {\n\t\treturn (\n      \t\t<Epic activeStory={this.state.activeStory} tabbar={\n        \t\t<Tabbar>\n\t\t\t\t\t{this.getItem(\"main\", \"Профиль\", <Icon24User />)}\n\t\t\t\t\t{this.getItem(\"pets\", \"Питомцы\", <Icon24Bug />)}\n        \t\t</Tabbar>\n      \t\t}>\n        \t\t<Home id=\"main\" fetchedUser={this.state.fetchedUser}/>\n        \t\t<Pets id=\"pets\" fetchedUser={this.state.fetchedUser} />\n      \t\t</Epic>\n  \t\t);\n\t}\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\nconnect.subscribe((e) => {\n   switch (e.detail.type) {\n       case 'VKWebAppUpdateConfig':\n           let schemeAttribute = document.createAttribute('scheme');\n           schemeAttribute.value = e.detail.data.scheme ? e.detail.data.scheme : 'client_light';\n           document.body.attributes.setNamedItem(schemeAttribute);\n           break;\n\n       default:\n           console.log(e.detail.type);\n   }\n});\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\r\nimport { ScreenSpinner } from '@vkontakte/vkui';\r\nimport axios from 'axios'\r\n\r\nlet petTypes;\r\n\r\nexport function send(group, method, params) {\r\n    return axios.get(`http://elektro-volk.ru/apieva/index.php?group=${group}&method=${method}&${window.location.search.substring(1)}`, { params });\r\n}\r\n\r\nexport function cSend(group, method, params, props, cb) {\r\n    send(group, method, params).then(r => cb(props.fetchedUser, r.data));\r\n}\r\n\r\nexport async function initPets() {\r\n    if (!petTypes) petTypes = (await send('pets', 'types')).data;\r\n    //alert(petTypes[0].mname)\r\n}\r\n\r\nexport function getPetType(typeId) {\r\n    return petTypes[typeId - 1];\r\n}\r\n\r\nexport function getPetTypes() {\r\n    return petTypes;\r\n}\r\n\r\nexport function makeAction(group, method, params, th, cb) {\r\n    return () => {\r\n        th.props.openSheet(<ScreenSpinner />);\r\n        cSend(group, method, params, th.props, (a, b) => { th.props.openSheet(null); cb(a, b) });\r\n    }\r\n}\r\n\r\nexport function makeOnRefresh(group, method, params, th, cb) {\r\n    return () => {\r\n        th.setState({ fetching: true });\r\n        cSend(group, method, params, th.props, (a, b) => { cb(a, b); th.setState({ fetching: false }) });\r\n    }\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/persik.695e98f0.png\";"],"sourceRoot":""}